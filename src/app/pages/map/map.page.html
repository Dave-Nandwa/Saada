<!-- <ion-header transparent no-border>
  <ion-buttons slot="start">
    <ion-back-button></ion-back-button>
  </ion-buttons>
  <ion-toolbar>
    <ion-title text-center>Map</ion-title>
  </ion-toolbar>
</ion-header> -->


<ion-content fullscreen>
  <agm-map [styles]="mapStyles" [zoom]="zoomLevel" [zoomControl]="false" [latitude]="lat" [longitude]="lng">

    <agm-marker [latitude]="lat" [longitude]="lng" [label]="You" [iconUrl]="mapIcon" ></agm-marker>

    <!-- Display Multiple Markers + An Info Window-->
    <agm-marker *ngFor="let point of points | async; trackBy: trackByFn" [latitude]="point.position.geopoint.latitude"
      [longitude]="point.position.geopoint.longitude"  [iconUrl]="carIcon">

      <agm-info-window>
        {{ point.hitMetadata | json }}
      </agm-info-window>

    </agm-marker>



    <agm-circle [latitude]="lat" [longitude]="lng" [radius]="(radius | async) * 1200"
      [fillColor]="'rgb(79,101,246,0.7)'">
    </agm-circle>


  </agm-map>
</ion-content>